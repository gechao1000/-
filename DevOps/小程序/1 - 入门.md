教程

https://developers.weixin.qq.com/ebook?action=get_post_info&docid=000248329b0088bb00866ba0d56c0a

API文档

https://developers.weixin.qq.com/miniprogram/dev/api/



目录

```
全局配置
/app.json

页面（可能是MVVM，可能是单向数据流）
/pages/index/index.wxml
/pages/index/index.js
```

关键字

```
微信中网页WebView，移动Web入口
JS API，早期内部使用WeixinJSBrige 
发布JS-SDK，网页开发工具包，Web开发者，微信内传播的移动网页

“微信 Web 资源离线存储”，直接从微信本地加载 Web 资源而不需要再从服务端拉取，减少网页加载时间，5M

渲染层，逻辑层：两个线程
JSCore不是完整的浏览器对象，不能用jquery，和nodejs有区别，一些npm不能用
```

WXML模板

```
<text>xxx</text>
标签必须闭合，大小写敏感

数据绑定 {{xxx}}
Page({
	data: {
		xxx: 'asdf'
	},
	onLoad() {
		this.setData({ msg: 'Hello World' })
	}
})

控制
<view wx:if="{{true}}"
<view wx:for="{{array}}"> {{index}} {{item.xxx}}

模板定义 <template name="xxx">
模板使用 <template is="xxx" data="{{k:'v'}}" />

引入模板 <import src="item.wxml"/>
拷贝 <include src="header.wxml"/> 除了 <template/> <wxs/> 外的整个代码

标签属性
id,class,style
hidden
data-*
bind*/catch*
```

## 宿主环境、API

微信客户端，比普通网页拥有更多能力

`渲染层`：每个页面一个WebView线程进行渲染；`逻辑层`：JSCore运行脚本

`通信`：微信客户端（Native）作为中转，网络请求也通过Native转发

`数据驱动`：状态变更时，视图自动变更

渲染层`触发事件`：用户操作，组件状态更新

`App()`注册一个程序，单例对象，通过getApp()获取，定义全局数据

`Page()`注册一个页面，data页面的初始数据

* 网络请求 API

```
wx.request({})
```

* 判断API是否兼容

```
if (wx.openBluetoothAdapter) {
  wx.openBluetoothAdapter()
} else {
  // 如果希望用户在最新版本的客户端上体验您的小程序，可以这样子提示
  wx.showModal({
    title: '提示',
    content: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'
  })
}
```

* 绑定事件

```
<view id="tapTest" data-hi="WeChat" bindtap="tapName"> Click me! </view>

// page.js
Page({
  tapName: function(event) {
  	// event.target.dataset.hi
    console.log(event)
  }
})
```

